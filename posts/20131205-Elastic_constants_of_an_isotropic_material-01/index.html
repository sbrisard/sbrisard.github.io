<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2013-12-05">

<title>Sébastien Brisard’s blog - Elastic constants of an isotropic material, part 1: 3D elasticity</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Sébastien Brisard’s blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://cv.archives-ouvertes.fr/sbrisard"> 
<span class="menu-text">About the author</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/sbrisard"> 
<span class="menu-text">GitHub</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Elastic constants of an isotropic material, part 1: 3D elasticity</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 5, 2013</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Among all classes of materials, the class of linearly elastic and isotropic materials is the simplest. Such materials are defined by two elastic constants: for example, Young's modulus <span class="math inline">\(E\)</span> and Poisson's ratio <span class="math inline">\(\nu\)</span>. However, depending on the situation, this pair of constants might not be the most appropriate (meaning that they may not lead to the most compact expressions). Alternative sets of elastic constants are</p>
<ul>
<li>Lamé’s constants <span class="math inline">\(\lambda\)</span> and <span class="math inline">\(\mu\)</span>,</li>
<li>bulk and shear moduli <span class="math inline">\(\kappa\)</span> and <span class="math inline">\(\mu\)</span>,</li>
<li>shear modulus and Poisson ratio <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\nu\)</span>.</li>
</ul>
<p>Each pair of constants is of course strictly equivalent to any other. I tend to work primarily with <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\nu\)</span>, and always find myself looking for the expression of E, <span class="math inline">\(\lambda\)</span> and <span class="math inline">\(\kappa\)</span> as a function of <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\nu\)</span>. In this series, we will derive these expressions, starting with 3D elasticity.</p>
<section id="lamés-constants" class="level1">
<h1>Lamé’s constants</h1>
<p>The constitutive equation of a linearly elastic and isotropic material reads <span id="eq-01"><span class="math display">\[
\sigma_{ij} = \lambda\,\varepsilon_{kk}\,\delta_{ij} + 2\mu\,\varepsilon_{ij},
\tag{1}\]</span></span> where <span class="math inline">\(\sigma_{ij}\)</span> (resp. <span class="math inline">\(\varepsilon_{ij}\)</span>) denotes the stress (resp. strain) tensor, while <span class="math inline">\(\lambda\)</span> (resp. <span class="math inline">\(\mu\)</span>) is Lamé's first (resp. second) constant; <span class="math inline">\(\mu\)</span> is also called the <em>shear modulus</em>. Eq.&nbsp;(<a href="#eq-01" class="quarto-xref">1</a>) is inverted so as to express the strain tensor as a function of the stress tensor. Taking <span class="math inline">\(i = j\)</span> and summing over repeated indices, we find <span class="math display">\[
\sigma_{ii} = (3\lambda + 2\mu)\varepsilon_{kk},
\]</span> where it is recalled that <span class="math inline">\(\delta_{ii} = 3\)</span> (the dimension of the physical space). Plugging into Eq.&nbsp;(<a href="#eq-01" class="quarto-xref">1</a>) <span class="math display">\[
\sigma_{ij} = \frac{\lambda}{3\lambda+2\mu}\,\sigma_{kk}\,\delta_{ij} + 2\mu\,\varepsilon_{ij}
\]</span> and finally <span id="eq-02"><span class="math display">\[
\varepsilon_{ij} = \frac{\sigma_{ij}}{2\mu} - \frac{\lambda}{2\mu\,(3\lambda+2\mu)}\,\sigma_{kk}\,\delta_{ij}.
\tag{2}\]</span></span></p>
</section>
<section id="youngs-modulus-and-poisson-ratio" class="level1">
<h1>Young’s modulus and Poisson ratio</h1>
<p>We consider a uniaxial traction experiment, where the stress tensor reduces to <span class="math inline">\(\sigma\,\vec e_3\otimes\vec e_3\)</span> (<span class="math inline">\(\sigma\)</span> is the imposed uniaxial stress). Substitution in Eq.&nbsp;(<a href="#eq-02" class="quarto-xref">2</a>) leads to the following expression of the longitudinal strain <span class="math display">\[
\varepsilon_{33} = \frac{\lambda+\mu}{\mu(3\lambda+2\mu)}\,\sigma.
\]</span></p>
<p>By definition, Young’s modulus is the longitudinal stress to longitudinal strain ratio: <span class="math inline">\(E=\sigma/\varepsilon_{33}\)</span>, so that <span id="eq-03"><span class="math display">\[
E = \frac{\mu\,(3\lambda+2\mu)}{\lambda+\mu}.
\tag{3}\]</span></span></p>
<p>The expression of the transverse strains is again derived using Eq.&nbsp;(<a href="#eq-02" class="quarto-xref">2</a>) <span class="math display">\[
\varepsilon_{11} = \varepsilon_{22} = -\frac{\lambda}{2\mu\,(3\lambda+2\mu)}\sigma
\]</span> and by definition, Poisson’s ratio is the oposite of the transverse to longitudinal strain ratio <span id="eq-04"><span class="math display">\[
\nu = -\frac{\varepsilon_{11}}{\varepsilon_{33}}
= -\frac{\varepsilon_{22}}{\varepsilon_{33}}
= \frac{\lambda}{2(\lambda+\mu)}.
\tag{4}\]</span></span></p>
<p>Expressions (<a href="#eq-03" class="quarto-xref">3</a>) and (<a href="#eq-04" class="quarto-xref">4</a>) can be substituted in the constitutive equation (<a href="#eq-02" class="quarto-xref">2</a>), leading to <span id="eq-05"><span class="math display">\[
\varepsilon_{ij} = \frac{1+\nu}E\,\sigma_{ij} - \frac\nu E\,\sigma_{kk}\,\delta_{ij}.
\tag{5}\]</span></span></p>
</section>
<section id="bulk-and-shear-moduli" class="level1">
<h1>Bulk and shear moduli</h1>
<p>We now consider an isotropic compression experiment, where the stress tensor reduces to a hydrostatic pressure <span class="math inline">\(\sigma_{ij}=-p\,\delta_{ij}\)</span>. Using Eq.&nbsp;(<a href="#eq-01" class="quarto-xref">1</a>), we find that the strain tensor is also isotropic <span id="eq-06"><span class="math display">\[
\varepsilon_{ij} = -\frac{p\,\delta_{ij}}{3\lambda+2\mu}.
\tag{6}\]</span></span></p>
<p>It is recalled that <span class="math inline">\(\varepsilon_\text v=\varepsilon_{kk}\)</span> denotes the relative volume change of the material. Then, from Eq.&nbsp;(<a href="#eq-06" class="quarto-xref">6</a>) <span class="math display">\[
\varepsilon_\text v = -\frac p{\kappa_\text{3D}},
\]</span> where <span class="math inline">\(\kappa_\text{3D}\)</span> denotes the bulk modulus, defined as follows <span id="eq-07"><span class="math display">\[
\kappa_\text{3D} = \lambda + \frac 23\mu.
\tag{7}\]</span></span></p>
<p>As we shall see in the <a href="../20131229-Elastic_constants_of_an_isotropic_material-02">next instalment</a> of this series, the definition of the bulk modulus <em>depends on the dimension of the physical space</em>, hence the '3D' subscript. Using <span class="math inline">\(\kappa\)</span> and <span class="math inline">\(\mu\)</span> as elastic constants, Eq.&nbsp;(<a href="#eq-01" class="quarto-xref">1</a>) reads <span id="eq-08"><span class="math display">\[
\sigma_{ij} = \kappa_\text{3D} \, \varepsilon_{kk} \, \delta_{ij}
+2\mu\,\left(\varepsilon_{ij}-\frac{\varepsilon_{kk}}3\,\delta_{ij}\right)
\tag{8}\]</span></span></p>
</section>
<section id="shear-modulus-and-poisson-ratio" class="level1">
<h1>Shear modulus and Poisson ratio</h1>
<p>I quite often use the shear modulus <span class="math inline">\(\mu\)</span> and Poisson ratio <span class="math inline">\(\nu\)</span> as the constants defining the elastic material. One of the reasons for this is the fact that the components of the fourth-rank Green operator for strains have the same expression in 3D and 2D (plane strain) elasticity when expressed as a function of <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\nu\)</span>.</p>
<p>In the present section, all other elastic constants are expressed as functions of these two constants. First, from Eq. <a href="@eq-04">(4)</a>, it is readily found that <span id="eq-09"><span class="math display">\[
\lambda = \frac{2\mu\,\nu}{1-2\nu}.
\tag{9}\]</span></span></p>
<p>Then, combining Eqs.&nbsp;(<a href="#eq-03" class="quarto-xref">3</a>) and (<a href="#eq-04" class="quarto-xref">4</a>) <span class="math display">\[
E = 2\mu\,(1+\nu).
\]</span></p>
<p>Finally, from Eqs.&nbsp;(<a href="#eq-07" class="quarto-xref">7</a>) and (<a href="#eq-09" class="quarto-xref">9</a>) <span class="math display">\[
\kappa_\text{3D} = \frac23\,\frac{1+\nu}{1-2\nu}\,\mu.
\]</span></p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>In this instalment, we have defined Lamé’s first and second constants, Young’s modulus, Poisson’s ratio, as well as the (3D) bulk modulus. Expressions relating these various constants have also been derived. In the <a href="../20131229-Elastic_constants_of_an_isotropic_material-02">next instalment</a> of this series, we will discuss the case of 2D (plane strain elasticity).</p>
</section>
<section id="notes" class="level1">
<h1>Notes</h1>
<ul>
<li>2023/01/22 – I would like to acknowledge Antonio Rodriguez Ferran from <a href="https://www.upc.edu/en">UPC-BarcelonaTech</a> for finding out two typos in this post. Do send your comments and corrections!</li>
</ul>
<!-- Local Variables: -->
<!-- mode: markdown -->
<!-- fill-column: 80 -->
<!-- End: -->


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Except where otherwise noted, content on this blog by Sébastien Brisard is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></p>
</div>
    <div class="nav-footer-right">
<p>📧​ sebastien [dot] brisard [at] univ [dash] amu [dot] fr</p>
</div>
  </div>
</footer>




</body></html>